<!DOCTYPE html>
<html>
  <head>
    <title>Sensors | Smart Home Management</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />
    <style>
      /* --- Base Styles (Consistent) --- */
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f5f7fa; /* Light gray background */
        color: #333; /* Default text color */
      }

      .container {
        padding: 2rem;
        max-width: 1200px;
        margin: 0 auto;
      }

      header {
        background-color: #1a73e8; /* Blue header background */
        color: white;
        padding: 1rem 2rem;
        margin-bottom: 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      /* Consistent heading styling */
      header h1,
      .page-title {
        margin: 0;
        font-weight: 400; /* Normal weight */
      }

      .logout {
        color: white;
        text-decoration: none;
        display: flex;
        align-items: center;
        transition: opacity 0.2s;
      }
      .logout:hover {
        opacity: 0.8;
      }

      .logout i {
        margin-right: 0.5rem;
      }

      /* --- Content Box (Consistent) --- */
      .content-box {
        background-color: white;
        border-radius: 8px;
        padding: 2rem;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        margin-bottom: 1.5rem; /* Space before the back link */
        overflow: hidden; /* Contain table borders/radius */
      }

      /* Styling for the H1 title within the content box */
      .page-title {
        display: flex;
        align-items: center;
        margin-bottom: 1.5rem; /* Space below title */
        color: #333;
      }

      .page-title i {
        font-size: 1.8rem;
        margin-right: 1rem;
        color: #1a73e8; /* Blue icon */
      }

      /* Table Styling (Consistent with Devices page) */
      table {
        border-collapse: collapse;
        width: 100%;
        font-size: 0.95rem;
      }

      th,
      td {
        padding: 0.8rem 1rem;
        border-bottom: 1px solid #eee; /* Lighter border between rows */
        text-align: left;
      }

      th {
        background-color: #f9f9f9; /* Very light gray for header */
        font-weight: 600; /* Slightly bolder header text */
        color: #555;
        border-bottom-width: 2px; /* Thicker border below header */
        border-bottom-color: #ddd;
        text-transform: uppercase; /* Match original style */
        font-size: 0.85rem; /* Match original style */
      }

      /* Row Hover effect */
      tbody tr:hover {
        background-color: #f5f7fa; /* Subtle hover */
      }

      /* Styling for icons inside table cells */
      td i.fas {
        margin-right: 0.6rem; /* Space after icon */
        color: #777; /* Neutral icon color */
        width: 1em; /* Align icons better */
        text-align: center;
      }

      /* Status Badge Styling */
      .status-badge {
        display: inline-block;
        padding: 4px 10px; /* Slightly more padding */
        border-radius: 12px;
        font-size: 0.8rem; /* Slightly smaller font */
        font-weight: 500;
        line-height: 1.2;
      }

      /* -- MODIFIED: Green for Online/Active -- */
      .status-online {
        background-color: #e8f5e9; /* Light Green background */
        color: #2e7d32; /* Dark Green text */
      }

      /* Red for Offline */
      .status-offline {
        background-color: #ffebee; /* Light Red background */
        color: #c62828; /* Dark Red text */
      }

      /* Styling for the back link (Consistent with Devices page) */
      .back-link {
        color: #1a73e8; /* Blue link color */
        text-decoration: none;
        display: inline-flex; /* Use flex for icon alignment */
        align-items: center;
        transition: color 0.2s;
      }

      .back-link:hover {
        color: #1256a1; /* Darker blue on hover */
        text-decoration: underline;
      }

      .back-link i {
        margin-right: 0.5rem;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Smart Home Management System</h1>
      <a href="/logout" class="logout">
        <i class="fas fa-sign-out-alt"></i> Logout
      </a>
    </header>

    <div class="container">
      <div class="content-box">
        <h1 class="page-title">
          <i class="fas fa-thermometer-half"></i> Sensors
        </h1>

        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Type</th>
              <th>Status</th>
              <th>Room</th>
            </tr>
          </thead>
          <tbody>
            <% sensors.forEach(sensor => { %>
            <tr>
              <td><%= sensor.SensorID %></td>
              <td><i class="fas fa-microchip"></i><%= sensor.Type %></td>
              <td>
                <span
                  class="status-badge <%= sensor.Status && sensor.Status.toLowerCase() === 'online' ? 'status-online' : 'status-offline' %>"
                >
                  <%= sensor.Status %>
                </span>
              </td>
              <td>
                <i class="fas fa-door-open"></i><%= sensor.RoomName ||
                'Unassigned' %>
              </td>
            </tr>
            <% }) %> <% if (sensors.length === 0) { %>
            <tr>
              <td
                colspan="4"
                style="text-align: center; color: #777; padding: 2rem"
              >
                No sensors found.
              </td>
            </tr>
            <% } %>
          </tbody>
        </table>
      </div>
      <p>
        <a href="/home" class="back-link">
          <i class="fas fa-arrow-left"></i> Back to Home
        </a>
      </p>
    </div>
  </body>
</html>
